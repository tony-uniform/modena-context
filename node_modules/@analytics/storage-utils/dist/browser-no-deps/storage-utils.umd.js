!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@analytics/global-storage-utils"),require("@analytics/cookie-utils"),require("@analytics/localstorage-utils"),require("@analytics/type-utils")):"function"==typeof define&&define.amd?define(["exports","@analytics/global-storage-utils","@analytics/cookie-utils","@analytics/localstorage-utils","@analytics/type-utils"],t):t((e||self).utilStorage={},e.globalStorageUtils,e.cookieUtils,e.localstorageUtils,e.typeUtils)}(this,function(e,t,o,r,i){function n(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(i.isObject(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}var a="any",l="localStorage",c="cookie",u="global",s=r.hasLocalStorage(),g=o.hasCookies();function f(e,r){if(e){var a=m(r),l=!p(a),c=y(a)?n(localStorage.getItem(e)):void 0;if(l&&!i.isUndefined(c))return c;var u=k(a)?n(o.getCookie(e)):void 0;if(l&&u)return u;var s=t.get(e);return l?s:{localStorage:c,cookie:u,global:s}}}function b(e,r,a){if(e&&!i.isUndefined(r)){var s={},g=m(a),f=JSON.stringify(r),b=!p(g);return y(g)&&(s.localStorage={location:l,current:r,previous:n(localStorage.getItem(e))},localStorage.setItem(e,f),b)?s.localStorage:k(g)&&(s.cookie={location:c,current:r,previous:n(o.getCookie(e))},o.setCookie(e,f),b)?s.cookie:(s.global={location:u,current:r,previous:t.get(e)},t.set(e,r),b?s.global:s)}}function d(e,r){if(e){var n=m(r),a=f(e,"*"),l={};return!i.isUndefined(a.localStorage)&&y(n)&&(localStorage.removeItem(e),l.localStorage=a.localStorage),!i.isUndefined(a.cookie)&&k(n)&&(o.removeCookie(e),l.cookie=a.cookie),!i.isUndefined(a.global)&&v(n,u)&&(t.remove(e),l.global=a.global),l}}function m(e){return e?i.isString(e)?e:e.storage:a}function y(e){return s&&v(e,l)}function k(e){return g&&v(e,c)}function p(e){return"*"===e||"all"===e}function v(e,t){return e===a||e===t||p(e)}var S={setItem:b,getItem:f,removeItem:d};Object.defineProperty(e,"globalContext",{enumerable:!0,get:function(){return t.globalContext}}),Object.defineProperty(e,"getCookie",{enumerable:!0,get:function(){return o.getCookie}}),Object.defineProperty(e,"hasCookies",{enumerable:!0,get:function(){return o.hasCookies}}),Object.defineProperty(e,"removeCookie",{enumerable:!0,get:function(){return o.removeCookie}}),Object.defineProperty(e,"setCookie",{enumerable:!0,get:function(){return o.setCookie}}),Object.defineProperty(e,"hasLocalStorage",{enumerable:!0,get:function(){return r.hasLocalStorage}}),e.ALL="*",e.ANY=a,e.COOKIE=c,e.GLOBAL=u,e.LOCAL_STORAGE=l,e.default=S,e.getItem=f,e.removeItem=d,e.setItem=b});
//# sourceMappingURL=storage-utils.umd.js.map
