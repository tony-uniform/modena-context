import{get as o,set as t,remove as r}from"@analytics/global-storage-utils";export{globalContext}from"@analytics/global-storage-utils";import{hasCookies as e,getCookie as a,setCookie as l,removeCookie as i}from"@analytics/cookie-utils";export{getCookie,hasCookies,removeCookie,setCookie}from"@analytics/cookie-utils";import{hasLocalStorage as c}from"@analytics/localstorage-utils";export{hasLocalStorage}from"@analytics/localstorage-utils";import{isObject as n,isUndefined as u,isString as g}from"@analytics/type-utils";function s(o){var t=o;try{if("true"===(t=JSON.parse(o)))return!0;if("false"===t)return!1;if(n(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(o){}if(null!==t&&""!==t)return t}var f="*",m="any",p="localStorage",v="cookie",S="global",k=c(),y=e();function b(t,r){if(t){var e=C(r),l=!F(e),i=d(e)?s(localStorage.getItem(t)):void 0;if(l&&!u(i))return i;var c=h(e)?s(a(t)):void 0;if(l&&c)return c;var n=o(t);return l?n:{localStorage:i,cookie:c,global:n}}}function I(r,e,i){if(r&&!u(e)){var c={},n=C(i),g=JSON.stringify(e),f=!F(n);return d(n)&&(c.localStorage={location:"localStorage",current:e,previous:s(localStorage.getItem(r))},localStorage.setItem(r,g),f)?c.localStorage:h(n)&&(c.cookie={location:"cookie",current:e,previous:s(a(r))},l(r,g),f)?c.cookie:(c.global={location:"global",current:e,previous:o(r)},t(r,e),f?c.global:c)}}function x(o,t){if(o){var e=C(t),a=b(o,"*"),l={};return!u(a.localStorage)&&d(e)&&(localStorage.removeItem(o),l.localStorage=a.localStorage),!u(a.cookie)&&h(e)&&(i(o),l.cookie=a.cookie),!u(a.global)&&J(e,"global")&&(r(o),l.global=a.global),l}}function C(o){return o?g(o)?o:o.storage:"any"}function d(o){return k&&J(o,"localStorage")}function h(o){return y&&J(o,"cookie")}function F(o){return"*"===o||"all"===o}function J(o,t){return"any"===o||o===t||F(o)}var N={setItem:I,getItem:b,removeItem:x};export default N;export{f as ALL,m as ANY,v as COOKIE,S as GLOBAL,p as LOCAL_STORAGE,b as getItem,x as removeItem,I as setItem};
//# sourceMappingURL=analytics-util-storage.module.js.map
