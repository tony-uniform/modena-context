!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((e||self).utilStorage={})}(this,function(e){var o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,t="undefined";function r(e){return o[e]}function n(e,t){return o[e]=t,t}function l(e){n(e)}var a=u(),i=g,c=g;function f(e){return a?g(e,"",-1):l(e)}function u(){if(typeof a!==t)return a;try{g("__x","__x"),a=-1!==document.cookie.indexOf("__x"),f("__x")}catch(e){a=!1}return a}function g(e,o,l,i,c,f){if(typeof window!==t){var u=arguments.length>1;return a||(u?n(e,o):r(e)),u?document.cookie=e+"="+encodeURIComponent(o)+(l?"; expires="+new Date(+new Date+1e3*l).toUTCString()+(i?"; path="+i:"")+(c?"; domain="+c:"")+(f?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var s=p();function p(){if(typeof s!==t)return s;s=!0;try{typeof localStorage!==t&&typeof JSON!==t||(s=!1),localStorage.setItem(t,t),localStorage.removeItem(t)}catch(e){s=!1}return s}function d(e){return void 0===e}function m(e){var o=e;try{if("true"===(o=JSON.parse(e)))return!0;if("false"===o)return!1;if(function(e){if("object"!=typeof e||null===e)return!1;for(var o=e;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(e)===o}(o))return o;parseFloat(o)===o&&(o=parseFloat(o))}catch(e){}if(null!==o&&""!==o)return o}var v="any",b="localStorage",y="cookie",S="global",I=p(),O=u();function k(e,o){if(e){var t=C(o),n=!L(t),l=_(t)?m(localStorage.getItem(e)):void 0;if(n&&!d(l))return l;var a=j(t)?m(i(e)):void 0;if(n&&a)return a;var c=r(e);return n?c:{localStorage:l,cookie:a,global:c}}}function h(e,o,t){if(e&&!d(o)){var l={},a=C(t),f=JSON.stringify(o),u=!L(a);return _(a)&&(l.localStorage={location:b,current:o,previous:m(localStorage.getItem(e))},localStorage.setItem(e,f),u)?l.localStorage:j(a)&&(l.cookie={location:y,current:o,previous:m(i(e))},c(e,f),u)?l.cookie:(l.global={location:S,current:o,previous:r(e)},n(e,o),u?l.global:l)}}function x(e,o){if(e){var t=C(o),r=k(e,"*"),n={};return!d(r.localStorage)&&_(t)&&(localStorage.removeItem(e),n.localStorage=r.localStorage),!d(r.cookie)&&j(t)&&(f(e),n.cookie=r.cookie),!d(r.global)&&A(t,S)&&(l(e),n.global=r.global),n}}function C(e){return e?"string"==typeof e?e:e.storage:v}function _(e){return I&&A(e,b)}function j(e){return O&&A(e,y)}function L(e){return"*"===e||"all"===e}function A(e,o){return e===v||e===o||L(e)}var w={setItem:h,getItem:k,removeItem:x};e.ALL="*",e.ANY=v,e.COOKIE=y,e.GLOBAL=S,e.LOCAL_STORAGE=b,e.default=w,e.getCookie=i,e.getItem=k,e.globalContext=o,e.hasCookies=u,e.hasLocalStorage=p,e.removeCookie=f,e.removeItem=x,e.setCookie=c,e.setItem=h});
//# sourceMappingURL=storage-utils.umd.js.map
