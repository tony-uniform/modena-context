var e=require("@analytics/global-storage-utils"),o=require("@analytics/cookie-utils"),t=require("@analytics/localstorage-utils"),r=require("@analytics/type-utils");function a(e){var o=e;try{if("true"===(o=JSON.parse(e)))return!0;if("false"===o)return!1;if(r.isObject(o))return o;parseFloat(o)===o&&(o=parseFloat(o))}catch(e){}if(null!==o&&""!==o)return o}var n=t.hasLocalStorage(),i=o.hasCookies();function l(t,n){if(t){var i=s(n),l=!p(i),c=g(i)?a(localStorage.getItem(t)):void 0;if(l&&!r.isUndefined(c))return c;var u=f(i)?a(o.getCookie(t)):void 0;if(l&&u)return u;var b=e.get(t);return l?b:{localStorage:c,cookie:u,global:b}}}function c(t,n,i){if(t&&!r.isUndefined(n)){var l={},c=s(i),u=JSON.stringify(n),b=!p(c);return g(c)&&(l.localStorage={location:"localStorage",current:n,previous:a(localStorage.getItem(t))},localStorage.setItem(t,u),b)?l.localStorage:f(c)&&(l.cookie={location:"cookie",current:n,previous:a(o.getCookie(t))},o.setCookie(t,u),b)?l.cookie:(l.global={location:"global",current:n,previous:e.get(t)},e.set(t,n),b?l.global:l)}}function u(t,a){if(t){var n=s(a),i=l(t,"*"),c={};return!r.isUndefined(i.localStorage)&&g(n)&&(localStorage.removeItem(t),c.localStorage=i.localStorage),!r.isUndefined(i.cookie)&&f(n)&&(o.removeCookie(t),c.cookie=i.cookie),!r.isUndefined(i.global)&&b(n,"global")&&(e.remove(t),c.global=i.global),c}}function s(e){return e?r.isString(e)?e:e.storage:"any"}function g(e){return n&&b(e,"localStorage")}function f(e){return i&&b(e,"cookie")}function p(e){return"*"===e||"all"===e}function b(e,o){return"any"===e||e===o||p(e)}var k={setItem:c,getItem:l,removeItem:u};Object.defineProperty(exports,"globalContext",{enumerable:!0,get:function(){return e.globalContext}}),Object.defineProperty(exports,"getCookie",{enumerable:!0,get:function(){return o.getCookie}}),Object.defineProperty(exports,"hasCookies",{enumerable:!0,get:function(){return o.hasCookies}}),Object.defineProperty(exports,"removeCookie",{enumerable:!0,get:function(){return o.removeCookie}}),Object.defineProperty(exports,"setCookie",{enumerable:!0,get:function(){return o.setCookie}}),Object.defineProperty(exports,"hasLocalStorage",{enumerable:!0,get:function(){return t.hasLocalStorage}}),exports.ALL="*",exports.ANY="any",exports.COOKIE="cookie",exports.GLOBAL="global",exports.LOCAL_STORAGE="localStorage",exports.default=k,exports.getItem=l,exports.removeItem=u,exports.setItem=c;
//# sourceMappingURL=analytics-util-storage.js.map
