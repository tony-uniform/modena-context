var g=Object.create;var a=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty;var y=(e,o)=>{for(var r in o)a(e,r,{get:o[r],enumerable:!0})},u=(e,o,r,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of S(o))!l.call(e,n)&&n!==r&&a(e,n,{get:()=>o[n],enumerable:!(t=P(o,n))||t.enumerable});return e};var A=(e,o,r)=>(r=e!=null?g(h(e)):{},u(o||!e||!e.__esModule?a(r,"default",{value:e,enumerable:!0}):r,e)),N=e=>u(a({},"__esModule",{value:!0}),e);var D={};y(D,{NextCookieTransitionDataStore:()=>m,enableNextSsr:()=>U});module.exports=N(D);var f=require("cookie"),p=require("@uniformdev/context"),m=class extends p.CookieTransitionDataStore{constructor({serverContext:o,...r}){super({...r,serverCookieValue:O(o)})}};function O(e,o=p.UNIFORM_DEFAULT_COOKIE_NAME){var t,n,s;if(!e)return;let r=(0,f.parse)((n=(t=e.req)==null?void 0:t.headers.cookie)!=null?n:"");if((s=e==null?void 0:e.res)!=null&&s.getHeaders){let i=e.res.getHeaders()["set-cookie"];i&&(r={...r,...(0,f.parse)(Array.isArray(i)?i[0]:i.toString())})}return r[o]}var k=require("cookie"),x=A(require("react"));function U(e,o){var n;let r=e.renderPage,{req:t}=e;t&&o.update({url:new URL(`https://${(n=t.headers.host)!=null?n:"unknown"}${t.url}`),cookies:t.headers.cookie?(0,k.parse)(t.headers.cookie):void 0}),e.renderPage=s=>r({...s,enhanceApp:d=>C=>x.createElement(d,{...C,serverUniformContext:o})})}0&&(module.exports={NextCookieTransitionDataStore,enableNextSsr});
