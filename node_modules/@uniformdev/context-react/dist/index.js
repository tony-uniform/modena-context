var nt=Object.create;var v=Object.defineProperty;var it=Object.getOwnPropertyDescriptor;var st=Object.getOwnPropertyNames;var at=Object.getPrototypeOf,mt=Object.prototype.hasOwnProperty;var pt=(t,e)=>{for(var o in e)v(t,o,{get:e[o],enumerable:!0})},B=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of st(e))!mt.call(t,r)&&r!==o&&v(t,r,{get:()=>e[r],enumerable:!(n=it(e,r))||n.enumerable});return t};var C=(t,e,o)=>(o=t!=null?nt(at(t)):{},B(e||!t||!t.__esModule?v(o,"default",{value:t,enumerable:!0}):o,t)),ft=t=>B(v({},"__esModule",{value:!0}),t);var Pt={};pt(Pt,{Personalize:()=>ct,Test:()=>dt,Track:()=>Tt,TrackFragment:()=>Ct,UniformContext:()=>lt,useQuirks:()=>ut,useScores:()=>A,useUniformContext:()=>s});module.exports=ft(Pt);var Q=require("react");var M=require("react"),L=(0,M.createContext)(void 0),_=(0,M.createContext)({});function s(t={}){let{throwOnMissingProvider:e=!0}=t,o=(0,Q.useContext)(L);if(e){if(o===void 0)throw new Error("useUniformContext must be used within a <UniformContext> provider");return o}return o}var w=require("react");function ut(){let{context:t}=s(),[e,o]=(0,w.useState)(t.quirks),n=r=>{o(r)};return(0,w.useEffect)(()=>(t.events.on("quirksUpdated",n),()=>{t.events.off("quirksUpdated",n)}),[t]),e}var I=require("react");var W=require("dequal/lite");function A(){let{context:t}=s(),[e,o]=(0,I.useState)(t.scores);return(0,I.useEffect)(()=>{let n=m=>{o(m)},r=t.scores;return(0,W.dequal)(e,r)||o(r),t.events.on("scoresUpdated",n),()=>{t.events.off("scoresUpdated",n)}},[t]),e}var F=C(require("react"));var y=C(require("react"));function j({variations:t,component:e,wrapperComponent:o,name:n,count:r=1}){let{context:m}=s(),i=A(),{variations:c,personalized:P}=(0,y.useMemo)(()=>m.personalize({name:n,variations:t,take:r}),[i,m,r,n,t]),g=o!=null?o:({children:T})=>y.default.createElement(y.default.Fragment,null,T),h=e;return y.default.createElement(_.Provider,{value:{personalized:!0}},c.length?y.default.createElement(g,{personalizationOccurred:P},c.map(T=>y.default.createElement(h,{key:T.id,personalizationResult:{variation:T,personalizationOccurred:P},...T}))):null)}var U=require("@uniformdev/context"),p=C(require("react"));var X=require("@uniformdev/context"),G=require("react"),x=t=>(0,G.createElement)(X.EdgeNodeTagName,t);function K(t){let{variations:e,count:o,component:n}=t,r={count:o!=null?o:1},m=n;return p.default.createElement(p.default.Fragment,null,p.default.createElement(x,{"data-type":U.ScriptType.ListStart,dangerouslySetInnerHTML:{__html:JSON.stringify(r)}}),e.map(i=>p.default.createElement(p.Fragment,{key:i.id},p.default.createElement(x,{"data-type":U.ScriptType.ListItemSettings,dangerouslySetInnerHTML:{__html:JSON.stringify({id:i.id,pz:i.pz||null})}}),p.default.createElement(x,{"data-type":U.ScriptType.ListItem},p.default.createElement(m,{key:i.id,personalizationResult:{variation:i,personalizationOccurred:!1},...i})))),p.default.createElement(x,{"data-type":U.ScriptType.ListEnd}))}var E=typeof window=="undefined";function ct(t){let{outputType:e}=s();return!E||e==="standard"?F.default.createElement(j,{...t}):e==="edge"?F.default.createElement(K,{...t}):null}var R=C(require("react"));var S=require("@uniformdev/context"),f=C(require("react"));function Y(t){let{name:e,variations:o,component:n}=t,r={name:e},m=n;return f.default.createElement(f.default.Fragment,null,f.default.createElement(x,{"data-type":S.ScriptType.TestStart,dangerouslySetInnerHTML:{__html:JSON.stringify(r)}}),o.map((i,c)=>f.default.createElement(f.Fragment,{key:i.id},f.default.createElement(x,{"data-type":S.ScriptType.ListItemSettings,dangerouslySetInnerHTML:{__html:JSON.stringify({id:i.id})}}),f.default.createElement(x,{"data-type":S.ScriptType.ListItem},f.default.createElement(m,{key:c,...i})))),f.default.createElement(x,{"data-type":S.ScriptType.TestEnd}))}var Z=C(require("react"));var $=({name:t,variations:e,component:o})=>{let{context:n}=s(),{result:r}=n.test({name:t,variations:e});return r?Z.default.createElement(o,{...r}):null};var dt=t=>{let{outputType:e}=s();return!E||e==="standard"?R.default.createElement($,{...t}):e==="edge"?R.default.createElement(Y,{...t}):null};var V=C(require("react")),tt=require("@uniformdev/context");var et=C(require("cookie")),lt=({context:t,children:e,outputType:o="standard",trackRouteOnRender:n=!0})=>((0,V.useEffect)(()=>{E||!n||t.update({url:new URL(window.location.href),cookies:et.default.parse(document.cookie)})}),V.default.createElement(L.Provider,{value:{context:t,outputType:o}},e,E?V.default.createElement(xt,null):null));function xt(){let{context:t}=s(),e={quirks:t.storage.data.quirks,tests:t.storage.data.tests,ssv:t.scores};return V.default.createElement("script",{id:tt.SERVER_STATE_ID,type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}})}var u=require("react");var ot=require("react");var N=t=>{let{personalized:e}=(0,ot.useContext)(_);return typeof e!="undefined"?e:typeof(t==null?void 0:t.personalized)!="undefined"?t.personalized:!1};var Tt=({behavior:t,children:e,tagName:o="div",threshold:n=.5,disableVisibilityTrigger:r=typeof window=="undefined"||!("IntersectionObserver"in window),...m})=>{let i=typeof document=="undefined"?"__uniform_ssr_url":document.location.href,{context:c}=s(),P=N(),[g,h]=(0,u.useState)(),[T,k]=(0,u.useState)(!1),H=(0,u.useRef)(null),d=(0,u.useRef)();return(0,u.useEffect)(()=>{g!==i&&(k(!1),h(i))},[i,g]),(0,u.useEffect)(()=>{var b;let q=!t||Array.isArray(t)&&!t.length;if(P||q||!H.current)return;let rt=Array.isArray(t)?t:[t],J=()=>{var l;T||(c.update({enrichments:rt}),k(!0),(l=d.current)==null||l.call(d))};if(r)J();else{(b=d.current)==null||b.call(d);let l=new IntersectionObserver(([O])=>{O.isIntersecting&&J()},{threshold:n});l.observe(H.current),d.current=()=>{var O;return(O=l.disconnect)==null?void 0:O.call(l)}}return()=>{var l;(l=d.current)==null||l.call(d)}},[c,t,r,n,P,g,i,T]),(0,u.createElement)(o,{...m,ref:H},e)};var D=C(require("react")),z=require("react");var Ct=({behavior:t,children:e})=>{let o=typeof document=="undefined"?"__uniform_ssr_url":document.location.href,{context:n}=s(),r=N(),[m,i]=(0,z.useState)(),[c,P]=(0,z.useState)(!1);return(0,z.useEffect)(()=>{m!==o&&(P(!1),i(o))},[o,m]),(0,z.useEffect)(()=>{let g=!t||Array.isArray(t)&&!t.length;if(r||g)return;(()=>{if(c)return;let k=Array.isArray(t)?t:[t];n.update({enrichments:k}),P(!0)})()},[n,t,r,c]),D.default.createElement(D.default.Fragment,null,e)};0&&(module.exports={Personalize,Test,Track,TrackFragment,UniformContext,useQuirks,useScores,useUniformContext});
