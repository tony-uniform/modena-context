var S=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var q=(r,e,t)=>e in r?S(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var z=(r,e)=>{for(var t in e)S(r,t,{get:e[t],enumerable:!0})},B=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of H(e))!K.call(r,n)&&n!==t&&S(r,n,{get:()=>e[n],enumerable:!(i=Q(e,n))||i.enumerable});return r};var Y=r=>B(S({},"__esModule",{value:!0}),r);var u=(r,e,t)=>(q(r,typeof e!="symbol"?e+"":e,t),t),F=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var s=(r,e,t)=>(F(r,e,"read from private field"),t?t.call(r):e.get(r)),p=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var Z={};z(Z,{AggregateClient:()=>f,ApiClientError:()=>h,ContextClient:()=>$,DimensionClient:()=>d,EnrichmentClient:()=>g,ManifestClient:()=>E,QuirkClient:()=>j,SignalClient:()=>U,computeDimensionDefinitionDisplayData:()=>V,computeDimensionDisplayData:()=>W,computeDimensionDisplayName:()=>X,nullLimitPolicy:()=>L});module.exports=Y(Z);var L=async r=>await r(),h=class extends Error{constructor(t,i,n,a,c,m){super(`${t}
 ${a}${c?" "+c:""} (${i} ${n}${m?` Request ID: ${m}`:""})`);this.errorMessage=t;this.fetchMethod=i;this.fetchUri=n;this.statusCode=a;this.statusText=c;this.requestId=m;Object.setPrototypeOf(this,h.prototype)}};var o=class{constructor(e){u(this,"options");var t,i,n,a,c,m;if(!e.apiKey&&!e.bearerToken)throw new Error("You must provide an API key or a bearer token");this.options={...e,fetch:(t=e.fetch)!=null?t:fetch,apiHost:(i=e.apiHost)!=null?i:"https://uniform.app",apiKey:(n=e.apiKey)!=null?n:null,projectId:(a=e.projectId)!=null?a:null,bearerToken:(c=e.bearerToken)!=null?c:null,limitPolicy:(m=e.limitPolicy)!=null?m:L}}async apiClient(e,t){return this.options.limitPolicy(async()=>{var a;let i=this.options.apiKey?{"x-api-key":this.options.apiKey}:{Authorization:`Bearer ${this.options.bearerToken}`},n=await fetch(e.toString(),{...t,headers:{...t==null?void 0:t.headers,...i}});if(!n.ok){let c="";try{let m=await n.text();try{let I=JSON.parse(m);I.errorMessage?c=Array.isArray(I.errorMessage)?I.errorMessage.join(", "):I.errorMessage:c=m}catch(I){c=m}}catch(m){c="General error"}throw new h(c,(a=t==null?void 0:t.method)!=null?a:"GET",e.toString(),n.status,n.statusText,o.getRequestId(n))}return t!=null&&t.expectNoContent?null:await n.json()})}createUrl(e,t){let i=new URL(`${this.options.apiHost}${e}`);return Object.entries(t!=null?t:{}).forEach(([n,a])=>{var c;typeof a!="undefined"&&a!==null&&i.searchParams.append(n,(c=a==null?void 0:a.toString())!=null?c:"")}),i}static getRequestId(e){let t=e.headers.get("x-nf-request-id");if(t)return t}};var P,T=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(T,P),{...e,projectId:t});return await this.apiClient(i)}async upsert(e){let t=this.createUrl(s(T,P));await this.apiClient(t,{method:"PUT",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async remove(e){let t=this.createUrl(s(T,P));await this.apiClient(t,{method:"DELETE",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}},f=T;P=new WeakMap,p(f,P,"/api/v2/aggregate");var A,v=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(v,A),{...e,projectId:t});return await this.apiClient(i)}},d=v;A=new WeakMap,p(d,A,"/api/v2/dimension");var x,O,y=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(y,x),{...e,projectId:t});return await this.apiClient(i)}async upsertCategory(e){let t=this.createUrl(s(y,x));await this.apiClient(t,{method:"PUT",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async removeCategory(e){let t=this.createUrl(s(y,x));await this.apiClient(t,{method:"DELETE",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async upsertValue(e){let t=this.createUrl(s(y,O));await this.apiClient(t,{method:"PUT",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async removeValue(e){let t=this.createUrl(s(y,O));await this.apiClient(t,{method:"DELETE",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}},g=y;x=new WeakMap,O=new WeakMap,p(g,x,"/api/v1/enrichments"),p(g,O,"/api/v1/enrichment-values");var k,J=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(J,k),{...e,projectId:t});return await this.apiClient(i)}},E=J;k=new WeakMap,p(E,k,"/api/v2/manifest");var C,G=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(G,C),{...e,projectId:t});return await this.apiClient(i)}async upsert(e){let t=this.createUrl(s(G,C));await this.apiClient(t,{method:"PUT",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async remove(e){let t=this.createUrl(s(G,C));await this.apiClient(t,{method:"DELETE",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}},j=G;C=new WeakMap,p(j,C,"/api/v2/quirk");var D,w=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(w,D),{...e,projectId:t});return await this.apiClient(i)}async upsert(e){let t=this.createUrl(s(w,D));await this.apiClient(t,{method:"PUT",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async remove(e){let t=this.createUrl(s(w,D));await this.apiClient(t,{method:"DELETE",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}},U=w;D=new WeakMap,p(U,D,"/api/v2/signal");var R,N=class extends o{constructor(e){super(e)}async get(e){let{projectId:t}=this.options,i=this.createUrl(s(N,R),{...e,projectId:t});return await this.apiClient(i)}async upsert(e){let t=this.createUrl(s(N,R));await this.apiClient(t,{method:"PUT",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}async remove(e){let t=this.createUrl(s(N,R));await this.apiClient(t,{method:"DELETE",body:JSON.stringify({...e,projectId:this.options.projectId}),expectNoContent:!0})}},b=N;R=new WeakMap,p(b,R,"/api/v2/test");var $=class{constructor(e){u(this,"enrichments");u(this,"aggregates");u(this,"dimensions");u(this,"manifest");u(this,"quirks");u(this,"signals");u(this,"tests");this.enrichments=new g(e),this.aggregates=new f(e),this.dimensions=new d(e),this.manifest=new E(e),this.quirks=new j(e),this.signals=new U(e),this.tests=new b(e)}};var M="_";function V(r){let e=r.category==="ENR"?"Enrichment":r.category==="SIG"?"Signal":r.subcategory==="1"?"Intent":r.subcategory==="0"?"Audience":"Aggregate";return{dim:r.dim,name:r.name,type:e,category:r.category==="ENR"?r.subcategory:void 0}}function W(r,e){var t,i,n,a;if((i=(t=e.project.pz)==null?void 0:t.agg)!=null&&i[r])return{dim:r,name:r,type:"Aggregate"};if((a=(n=e.project.pz)==null?void 0:n.sig)!=null&&a[r])return{dim:r,name:r,type:"Signal"};if(r.indexOf(M)>=0){let[c,m]=r.split(M);return{dim:r,name:m,type:"Enrichment",category:c}}}function X(r){let{type:e,name:t}=V(r);return`${e}: ${t}`}0&&(module.exports={AggregateClient,ApiClientError,ContextClient,DimensionClient,EnrichmentClient,ManifestClient,QuirkClient,SignalClient,computeDimensionDefinitionDisplayData,computeDimensionDisplayData,computeDimensionDisplayName,nullLimitPolicy});
