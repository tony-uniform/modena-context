var a=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var h=(e,o)=>{for(var r in o)a(e,r,{get:o[r],enumerable:!0})},x=(e,o,r,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of g(o))!f.call(e,t)&&t!==r&&a(e,t,{get:()=>o[t],enumerable:!(n=P(o,t))||n.enumerable});return e};var E=e=>x(a({},"__esModule",{value:!0}),e);var R={};h(R,{CANVAS_COMMERCETOOLS_PARAMETER_TYPES:()=>L,createCommercetoolsEnhancer:()=>O});module.exports=E(R);var d=require("@uniformdev/canvas"),i={expand:"masterData.current.categories[*]"},L=Object.freeze(["commercetoolsProduct","commercetoolsProductList"]);function O({apiRoot:e,projectKey:o,createQueryArgs:r,limitPolicy:n}){return{enhanceOne:async({parameter:t,parameterName:l,component:C,context:y})=>{var m;let c=[];if(p(t)?c.push(t.value):v(t)&&c.push(...t.value),c.length)try{let s=r&&(m=r({parameter:t,parameterName:l,component:C,defaultQueryArgs:i,context:y}))!=null?m:i,u=await e.withProjectKey({projectKey:o}).products().get({queryArgs:{where:"id in :ids","var.ids":c,...s}}).execute();return p(t)?u.body.results[0]:u.body.results}catch(s){throw new Error(`Failed loading commercetools entries ${t.value} ${s.toString()}`)}},limitPolicy:n!=null?n:(0,d.createLimitPolicy)({throttle:!1})}}function p(e){return e.type==="commercetoolsProduct"&&typeof e.value=="string"}function v(e){return e.type==="commercetoolsProductList"&&Array.isArray(e.value)}0&&(module.exports={CANVAS_COMMERCETOOLS_PARAMETER_TYPES,createCommercetoolsEnhancer});
