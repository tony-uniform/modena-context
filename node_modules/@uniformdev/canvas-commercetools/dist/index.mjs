import{createLimitPolicy as P}from"@uniformdev/canvas";var c={expand:"masterData.current.categories[*]"},v=Object.freeze(["commercetoolsProduct","commercetoolsProductList"]);function R({apiRoot:e,projectKey:u,createQueryArgs:s,limitPolicy:r}){return{enhanceOne:async({parameter:t,parameterName:p,component:d,context:l})=>{var a;let o=[];if(m(t)?o.push(t.value):g(t)&&o.push(...t.value),o.length)try{let n=s&&(a=s({parameter:t,parameterName:p,component:d,defaultQueryArgs:c,context:l}))!=null?a:c,i=await e.withProjectKey({projectKey:u}).products().get({queryArgs:{where:"id in :ids","var.ids":o,...n}}).execute();return m(t)?i.body.results[0]:i.body.results}catch(n){throw new Error(`Failed loading commercetools entries ${t.value} ${n.toString()}`)}},limitPolicy:r!=null?r:P({throttle:!1})}}function m(e){return e.type==="commercetoolsProduct"&&typeof e.value=="string"}function g(e){return e.type==="commercetoolsProductList"&&Array.isArray(e.value)}export{v as CANVAS_COMMERCETOOLS_PARAMETER_TYPES,R as createCommercetoolsEnhancer};
