import{createLimitPolicy as d}from"@uniformdev/canvas";var T=Object.freeze(["sanityEntrySelector"]);function R({client:n,previewClient:t,modifyQuery:o,limitPolicy:a}){return t=t!=null?t:n,{enhanceOne:async({parameter:e,parameterName:y,component:u,context:i})=>{var c;if(l(e)){let m=i.preview?t:n;try{let r="*[_id == $id][0]",s={id:e.value},{query:S,queryParameters:p}=(c=o==null?void 0:o({query:r,queryParameters:s,parameter:e,component:u,parameterName:y,context:i}))!=null?c:{query:r,queryParameters:s};return await m.fetch(S,p)}catch(r){throw new Error(`Failed loading Sanity document ${e.value} ${r.toString()}`)}}},limitPolicy:a!=null?a:d({throttle:!1})}}function l(n){return n.type==="sanityEntrySelector"&&typeof(n==null?void 0:n.value)=="string"}export{T as CANVAS_SANITY_PARAMETER_TYPES,R as createSanityEnhancer};
